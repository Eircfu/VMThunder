#!/usr/bin/env python

import sys
sys.path.append("..")

from vmthunder.getconf import GetConf
from vmthunder import service
from vmthunder import compute

def wsgi_service():
    server = service.APIService()
    server.start()

def start():
    gc = GetConf('../etc/vmthunder/vmthunder.conf')
    fcg_name = gc.get_fcg_name()
    ssds = gc.get_fcg_ssds()
    block_size = gc.get_fcg_blocksize()
    pattern = gc.get_fcg_pattern()

    cn = compute.get_instance(fcg_name, ssds, block_size, pattern)
    wsgi_service()

if __name__ == '__main__':
    start()
